{"id":"agent-ops-0fl","title":"Phase 1: Data Layer","description":"Implement the foundational data layer including Zod models, Drizzle ORM schema, and repository pattern for data access.","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-20T22:43:44.995199-06:00","updated_at":"2025-12-21T13:06:25.056901-06:00","closed_at":"2025-12-21T13:06:25.056901-06:00","close_reason":"Closed","labels":["backend","foundation"]}
{"id":"agent-ops-0fl.1","title":"Implement WorkItem Zod model","description":"Create src/models/work-item.ts with WorkItemType, WorkItemStatus, Transition, SuccessCriterion, and WorkItem Zod schemas as specified in design doc.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T22:44:31.844652-06:00","updated_at":"2025-12-21T13:06:04.38415-06:00","closed_at":"2025-12-21T13:06:04.38415-06:00","close_reason":"Closed","labels":["backend","models"],"dependencies":[{"issue_id":"agent-ops-0fl.1","depends_on_id":"agent-ops-0fl","type":"parent-child","created_at":"2025-12-20T22:44:31.847385-06:00","created_by":"daemon"}]}
{"id":"agent-ops-0fl.2","title":"Implement AgentTemplate Zod model","description":"Create src/models/template.ts with AgentRole, PermissionMode, MCPServerConfig, and AgentTemplate Zod schemas as specified in design doc.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T22:44:32.939365-06:00","updated_at":"2025-12-21T13:06:04.650032-06:00","closed_at":"2025-12-21T13:06:04.650032-06:00","close_reason":"Closed","labels":["backend","models"],"dependencies":[{"issue_id":"agent-ops-0fl.2","depends_on_id":"agent-ops-0fl","type":"parent-child","created_at":"2025-12-20T22:44:32.943105-06:00","created_by":"daemon"}]}
{"id":"agent-ops-0fl.3","title":"Implement AgentWorker Zod model","description":"Create src/models/worker.ts with WorkerStatus, AgentWorker schemas and WorkerPool interface as specified in design doc.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T22:44:34.577329-06:00","updated_at":"2025-12-21T13:06:04.902113-06:00","closed_at":"2025-12-21T13:06:04.902113-06:00","close_reason":"Closed","labels":["backend","models"],"dependencies":[{"issue_id":"agent-ops-0fl.3","depends_on_id":"agent-ops-0fl","type":"parent-child","created_at":"2025-12-20T22:44:34.58005-06:00","created_by":"daemon"}]}
{"id":"agent-ops-0fl.4","title":"Implement Trace model","description":"Create src/models/trace.ts with schema for observability events including tool calls, state changes, and metrics.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T22:44:36.612065-06:00","updated_at":"2025-12-21T13:06:15.24823-06:00","closed_at":"2025-12-21T13:06:15.24823-06:00","close_reason":"Closed","labels":["backend","models"],"dependencies":[{"issue_id":"agent-ops-0fl.4","depends_on_id":"agent-ops-0fl","type":"parent-child","created_at":"2025-12-20T22:44:36.614698-06:00","created_by":"daemon"}]}
{"id":"agent-ops-0fl.5","title":"Setup Drizzle ORM schema","description":"Create src/db/schema.ts with Drizzle table definitions for work_items, templates, workers, and traces. Configure SQLite with better-sqlite3.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-20T22:44:37.591417-06:00","updated_at":"2025-12-20T22:58:56.366139-06:00","closed_at":"2025-12-20T22:58:56.366139-06:00","close_reason":"Closed","labels":["backend","database"],"dependencies":[{"issue_id":"agent-ops-0fl.5","depends_on_id":"agent-ops-0fl","type":"parent-child","created_at":"2025-12-20T22:44:37.593846-06:00","created_by":"daemon"}]}
{"id":"agent-ops-0fl.6","title":"Create database migrations","description":"Setup Drizzle migrations in src/db/migrations/ with initial schema migration.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T22:44:38.812214-06:00","updated_at":"2025-12-21T13:06:15.491097-06:00","closed_at":"2025-12-21T13:06:15.491097-06:00","close_reason":"Closed","labels":["backend","database"],"dependencies":[{"issue_id":"agent-ops-0fl.6","depends_on_id":"agent-ops-0fl","type":"parent-child","created_at":"2025-12-20T22:44:38.815641-06:00","created_by":"daemon"}]}
{"id":"agent-ops-0fl.7","title":"Implement WorkItem repository","description":"Create src/repositories/work-item.repository.ts with CRUD operations and query methods for work items.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T22:44:40.054139-06:00","updated_at":"2025-12-21T13:06:15.71092-06:00","closed_at":"2025-12-21T13:06:15.71092-06:00","close_reason":"Closed","labels":["backend","repository"],"dependencies":[{"issue_id":"agent-ops-0fl.7","depends_on_id":"agent-ops-0fl","type":"parent-child","created_at":"2025-12-20T22:44:40.056984-06:00","created_by":"daemon"}]}
{"id":"agent-ops-0fl.8","title":"Implement Template repository","description":"Create src/repositories/template.repository.ts with CRUD operations for agent templates.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T22:44:41.374567-06:00","updated_at":"2025-12-21T13:06:24.605731-06:00","closed_at":"2025-12-21T13:06:24.605731-06:00","close_reason":"Closed","labels":["backend","repository"],"dependencies":[{"issue_id":"agent-ops-0fl.8","depends_on_id":"agent-ops-0fl","type":"parent-child","created_at":"2025-12-20T22:44:41.378819-06:00","created_by":"daemon"}]}
{"id":"agent-ops-0fl.9","title":"Implement Worker repository","description":"Create src/repositories/worker.repository.ts with CRUD operations for agent workers.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T22:44:42.468284-06:00","updated_at":"2025-12-21T13:06:24.833897-06:00","closed_at":"2025-12-21T13:06:24.833897-06:00","close_reason":"Closed","labels":["backend","repository"],"dependencies":[{"issue_id":"agent-ops-0fl.9","depends_on_id":"agent-ops-0fl","type":"parent-child","created_at":"2025-12-20T22:44:42.472686-06:00","created_by":"daemon"}]}
{"id":"agent-ops-4yu","title":"Phase 5: Frontend Integration","description":"Connect frontend to backend with Zustand stores, API client, React Query, WebSocket real-time updates, and drag-and-drop functionality.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-20T22:44:01.369637-06:00","updated_at":"2025-12-20T22:44:01.369637-06:00","labels":["frontend","integration"],"dependencies":[{"issue_id":"agent-ops-4yu","depends_on_id":"agent-ops-ll0","type":"blocks","created_at":"2025-12-20T22:47:28.781511-06:00","created_by":"daemon"}]}
{"id":"agent-ops-4yu.1","title":"Implement API client","description":"Create src/api/client.ts with fetch wrapper and typed methods for all backend endpoints (work-items, templates, workers, metrics, config).","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T22:46:40.67856-06:00","updated_at":"2025-12-20T22:46:40.67856-06:00","labels":["api","frontend"],"dependencies":[{"issue_id":"agent-ops-4yu.1","depends_on_id":"agent-ops-4yu","type":"parent-child","created_at":"2025-12-20T22:46:40.68128-06:00","created_by":"daemon"}]}
{"id":"agent-ops-4yu.10","title":"Connect Agents page to real data","description":"Replace hardcoded mock data in Agents.tsx with React Query hooks and implement worker control actions.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-20T22:46:52.331297-06:00","updated_at":"2025-12-20T22:46:52.331297-06:00","labels":["frontend","integration"],"dependencies":[{"issue_id":"agent-ops-4yu.10","depends_on_id":"agent-ops-4yu","type":"parent-child","created_at":"2025-12-20T22:46:52.334053-06:00","created_by":"daemon"}]}
{"id":"agent-ops-4yu.2","title":"Implement WorkItems Zustand store","description":"Create src/stores/work-items.store.ts with state and actions for work item CRUD, status transitions, and optimistic updates.","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T22:46:41.679572-06:00","updated_at":"2025-12-20T22:46:41.679572-06:00","labels":["frontend","state"],"dependencies":[{"issue_id":"agent-ops-4yu.2","depends_on_id":"agent-ops-4yu","type":"parent-child","created_at":"2025-12-20T22:46:41.683109-06:00","created_by":"daemon"}]}
{"id":"agent-ops-4yu.3","title":"Implement Workers Zustand store","description":"Create src/stores/workers.store.ts with state and actions for agent workers, status updates, and metrics.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-20T22:46:43.103687-06:00","updated_at":"2025-12-20T22:46:43.103687-06:00","labels":["frontend","state"],"dependencies":[{"issue_id":"agent-ops-4yu.3","depends_on_id":"agent-ops-4yu","type":"parent-child","created_at":"2025-12-20T22:46:43.106622-06:00","created_by":"daemon"}]}
{"id":"agent-ops-4yu.4","title":"Implement Templates Zustand store","description":"Create src/stores/templates.store.ts with state and actions for agent template management.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-20T22:46:44.139927-06:00","updated_at":"2025-12-20T22:46:44.139927-06:00","labels":["frontend","state"],"dependencies":[{"issue_id":"agent-ops-4yu.4","depends_on_id":"agent-ops-4yu","type":"parent-child","created_at":"2025-12-20T22:46:44.142658-06:00","created_by":"daemon"}]}
{"id":"agent-ops-4yu.5","title":"Setup React Query integration","description":"Configure React Query provider, create query hooks for data fetching with caching, and integrate with Zustand stores.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-20T22:46:46.344097-06:00","updated_at":"2025-12-20T22:46:46.344097-06:00","labels":["data","frontend"],"dependencies":[{"issue_id":"agent-ops-4yu.5","depends_on_id":"agent-ops-4yu","type":"parent-child","created_at":"2025-12-20T22:46:46.346757-06:00","created_by":"daemon"}]}
{"id":"agent-ops-4yu.6","title":"Implement WebSocket client","description":"Create src/hooks/useWebSocket.ts using react-use-websocket for real-time updates, reconnection handling, and event dispatching to stores.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-20T22:46:47.467021-06:00","updated_at":"2025-12-20T22:46:47.467021-06:00","labels":["frontend","websocket"],"dependencies":[{"issue_id":"agent-ops-4yu.6","depends_on_id":"agent-ops-4yu","type":"parent-child","created_at":"2025-12-20T22:46:47.469636-06:00","created_by":"daemon"}]}
{"id":"agent-ops-4yu.7","title":"Implement Kanban drag-and-drop","description":"Integrate @dnd-kit for Kanban board task reordering and column transitions with backend sync.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-20T22:46:48.468861-06:00","updated_at":"2025-12-20T22:46:48.468861-06:00","labels":["frontend","ui"],"dependencies":[{"issue_id":"agent-ops-4yu.7","depends_on_id":"agent-ops-4yu","type":"parent-child","created_at":"2025-12-20T22:46:48.471813-06:00","created_by":"daemon"}]}
{"id":"agent-ops-4yu.8","title":"Connect Dashboard to real data","description":"Replace hardcoded mock data in Dashboard.tsx with React Query hooks fetching from backend APIs.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-20T22:46:49.758444-06:00","updated_at":"2025-12-20T22:46:49.758444-06:00","labels":["frontend","integration"],"dependencies":[{"issue_id":"agent-ops-4yu.8","depends_on_id":"agent-ops-4yu","type":"parent-child","created_at":"2025-12-20T22:46:49.761044-06:00","created_by":"daemon"}]}
{"id":"agent-ops-4yu.9","title":"Connect Kanban to real data","description":"Replace hardcoded mock data in Kanban.tsx with React Query hooks and implement status transition calls.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-20T22:46:51.051945-06:00","updated_at":"2025-12-20T22:46:51.051945-06:00","labels":["frontend","integration"],"dependencies":[{"issue_id":"agent-ops-4yu.9","depends_on_id":"agent-ops-4yu","type":"parent-child","created_at":"2025-12-20T22:46:51.054475-06:00","created_by":"daemon"}]}
{"id":"agent-ops-7vk","title":"Phase 2: Business Logic","description":"Implement core services layer including work item management, template registry, worker pool, and workflow engine with state machine transitions and approval gates.","status":"closed","priority":0,"issue_type":"epic","created_at":"2025-12-20T22:43:57.535971-06:00","updated_at":"2025-12-22T08:44:08.195136-06:00","closed_at":"2025-12-22T08:44:08.195136-06:00","close_reason":"Closed","labels":["backend","services"],"dependencies":[{"issue_id":"agent-ops-7vk","depends_on_id":"agent-ops-0fl","type":"blocks","created_at":"2025-12-20T22:47:28.120681-06:00","created_by":"daemon"}]}
{"id":"agent-ops-7vk.1","title":"Implement WorkItem service","description":"Create src/services/work-item.service.ts with business logic for work item lifecycle, status transitions, and success criteria management.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-20T22:45:03.757551-06:00","updated_at":"2025-12-21T13:22:04.890858-06:00","closed_at":"2025-12-21T13:22:04.890858-06:00","close_reason":"Closed","labels":["backend","services"],"dependencies":[{"issue_id":"agent-ops-7vk.1","depends_on_id":"agent-ops-7vk","type":"parent-child","created_at":"2025-12-20T22:45:03.760792-06:00","created_by":"daemon"}]}
{"id":"agent-ops-7vk.2","title":"Implement Template registry service","description":"Create src/services/template-registry.service.ts for managing agent templates including built-in templates and user-defined templates.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T22:45:04.712367-06:00","updated_at":"2025-12-22T08:43:52.017783-06:00","closed_at":"2025-12-22T08:43:52.017783-06:00","close_reason":"Closed","labels":["backend","services"],"dependencies":[{"issue_id":"agent-ops-7vk.2","depends_on_id":"agent-ops-7vk","type":"parent-child","created_at":"2025-12-20T22:45:04.71523-06:00","created_by":"daemon"}]}
{"id":"agent-ops-7vk.3","title":"Implement Worker pool service","description":"Create src/services/worker-pool.service.ts for managing agent worker lifecycle, concurrency limits (max_workers), and work queue.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-20T22:45:05.940132-06:00","updated_at":"2025-12-21T13:22:05.098858-06:00","closed_at":"2025-12-21T13:22:05.098858-06:00","close_reason":"Closed","labels":["backend","services"],"dependencies":[{"issue_id":"agent-ops-7vk.3","depends_on_id":"agent-ops-7vk","type":"parent-child","created_at":"2025-12-20T22:45:05.943504-06:00","created_by":"daemon"}]}
{"id":"agent-ops-7vk.4","title":"Implement Workflow engine service","description":"Create src/services/workflow-engine.service.ts with state machine for Kanban transitions, configurable approval gates, and work assignment logic.","status":"closed","priority":0,"issue_type":"task","created_at":"2025-12-20T22:45:07.018829-06:00","updated_at":"2025-12-21T13:22:05.309043-06:00","closed_at":"2025-12-21T13:22:05.309043-06:00","close_reason":"Closed","labels":["backend","services"],"dependencies":[{"issue_id":"agent-ops-7vk.4","depends_on_id":"agent-ops-7vk","type":"parent-child","created_at":"2025-12-20T22:45:07.02171-06:00","created_by":"daemon"}]}
{"id":"agent-ops-7vk.5","title":"Implement Observability service","description":"Create src/services/observability.service.ts for collecting agent metrics, token usage, cost tracking, and trace events.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T22:45:08.33106-06:00","updated_at":"2025-12-22T08:43:52.267105-06:00","closed_at":"2025-12-22T08:43:52.267105-06:00","close_reason":"Closed","labels":["backend","services"],"dependencies":[{"issue_id":"agent-ops-7vk.5","depends_on_id":"agent-ops-7vk","type":"parent-child","created_at":"2025-12-20T22:45:08.333737-06:00","created_by":"daemon"}]}
{"id":"agent-ops-7vk.6","title":"Implement WebSocket hub service","description":"Create src/services/websocket-hub.service.ts for real-time event broadcasting to connected clients including agent state, work item updates, and metrics.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-20T22:45:09.695881-06:00","updated_at":"2025-12-22T08:43:52.521286-06:00","closed_at":"2025-12-22T08:43:52.521286-06:00","close_reason":"Closed","labels":["backend","services"],"dependencies":[{"issue_id":"agent-ops-7vk.6","depends_on_id":"agent-ops-7vk","type":"parent-child","created_at":"2025-12-20T22:45:09.703399-06:00","created_by":"daemon"}]}
{"id":"agent-ops-93m","title":"Phase 0: Aspire Infrastructure Migration","description":"Convert the existing codebase to use .NET Aspire for service orchestration, telemetry, and local development experience. This enables polyglot service management, OpenTelemetry-based observability, and the Aspire Dashboard for debugging agent behavior.\n\n## Why Aspire?\n- Multi-agent orchestration with service discovery\n- OpenTelemetry integration (industry standard, portable to production APM)\n- Aspire Dashboard for real-time traces, logs, metrics visualization\n- Future-proof for adding Redis, Postgres, message queues\n- Better developer experience than Makefile-based orchestration\n\n## Scope\n- Add C# AppHost project (~30 lines) for orchestration\n- Add OpenTelemetry SDK to Node.js backend\n- Refactor ObservabilityService to emit OTEL spans\n- Remove Makefile orchestration (replaced by Aspire)\n- Requires .NET 10 SDK for Aspire 13 polyglot features\n\n## What's Preserved\n- All Drizzle schema and migrations\n- All Zod models\n- All repositories\n- All business logic services\n- Frontend components unchanged","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-22T14:09:46.480209-06:00","updated_at":"2025-12-22T14:09:46.480209-06:00","labels":["aspire","infrastructure"]}
{"id":"agent-ops-93m.1","title":"Add AppHost C# project for Aspire orchestration","description":"Create the C# AppHost project that orchestrates the Node.js backend and React frontend using Aspire 13.\n\n## Files to Create\n```\nAppHost/\n├── AppHost.csproj\n└── Program.cs\n```\n\n## AppHost.csproj\n```xml\n\u003cProject Sdk=\"Microsoft.NET.Sdk\"\u003e\n  \u003cPropertyGroup\u003e\n    \u003cOutputType\u003eExe\u003c/OutputType\u003e\n    \u003cTargetFramework\u003enet10.0\u003c/TargetFramework\u003e\n    \u003cIsAspireHost\u003etrue\u003c/IsAspireHost\u003e\n  \u003c/PropertyGroup\u003e\n  \u003cItemGroup\u003e\n    \u003cPackageReference Include=\"Aspire.Hosting\" Version=\"13.*\" /\u003e\n    \u003cPackageReference Include=\"Aspire.Hosting.NodeJs\" Version=\"13.*\" /\u003e\n  \u003c/ItemGroup\u003e\n\u003c/Project\u003e\n```\n\n## Program.cs\n```csharp\nvar builder = DistributedApplication.CreateBuilder(args);\n\nvar backend = builder.AddNodeApp(\"backend\", \"../backend\", \"dist/index.js\")\n    .WithHttpEndpoint(port: 3001, name: \"api\");\n\nvar frontend = builder.AddViteApp(\"frontend\", \"../frontend\")\n    .WithReference(backend);\n\nbuilder.Build().Run();\n```\n\n## Prerequisites\n- Install .NET 10 SDK\n- Run `dotnet workload install aspire`\n\n## Acceptance Criteria\n- [ ] AppHost project builds successfully\n- [ ] `dotnet run --project AppHost` starts both backend and frontend\n- [ ] Aspire Dashboard accessible at http://localhost:15888","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-22T14:10:01.53767-06:00","updated_at":"2025-12-22T14:10:01.53767-06:00","labels":["aspire","dotnet","infrastructure"],"dependencies":[{"issue_id":"agent-ops-93m.1","depends_on_id":"agent-ops-93m","type":"parent-child","created_at":"2025-12-22T14:10:01.540984-06:00","created_by":"daemon"}]}
{"id":"agent-ops-93m.2","title":"Add OpenTelemetry SDK packages to backend","description":"Install the OpenTelemetry Node.js SDK packages required for emitting traces, metrics, and logs to the Aspire Dashboard.\n\n## Packages to Install\n```bash\nnpm install @opentelemetry/sdk-node \\\n  @opentelemetry/api \\\n  @opentelemetry/auto-instrumentations-node \\\n  @opentelemetry/exporter-trace-otlp-grpc \\\n  @opentelemetry/exporter-metrics-otlp-grpc \\\n  @opentelemetry/resources \\\n  @opentelemetry/semantic-conventions\n```\n\n## Why These Packages\n- `@opentelemetry/sdk-node`: Core SDK for Node.js\n- `@opentelemetry/api`: API for creating custom spans\n- `@opentelemetry/auto-instrumentations-node`: Auto-instrument HTTP, Fastify, etc.\n- `@opentelemetry/exporter-*-otlp-grpc`: Export to Aspire Dashboard via OTLP/gRPC\n\n## Acceptance Criteria\n- [ ] All packages installed without conflicts\n- [ ] TypeScript types available for all packages\n- [ ] No breaking changes to existing dependencies","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-22T14:10:15.596645-06:00","updated_at":"2025-12-22T14:10:15.596645-06:00","labels":["aspire","backend","opentelemetry"],"dependencies":[{"issue_id":"agent-ops-93m.2","depends_on_id":"agent-ops-93m","type":"parent-child","created_at":"2025-12-22T14:10:15.5999-06:00","created_by":"daemon"}]}
{"id":"agent-ops-93m.3","title":"Initialize OpenTelemetry in backend startup","description":"Configure and initialize OpenTelemetry SDK at backend startup, before Fastify server starts.\n\n## Create src/telemetry.ts\n```typescript\nimport { NodeSDK } from '@opentelemetry/sdk-node';\nimport { getNodeAutoInstrumentations } from '@opentelemetry/auto-instrumentations-node';\nimport { OTLPTraceExporter } from '@opentelemetry/exporter-trace-otlp-grpc';\nimport { OTLPMetricExporter } from '@opentelemetry/exporter-metrics-otlp-grpc';\nimport { Resource } from '@opentelemetry/resources';\nimport { ATTR_SERVICE_NAME } from '@opentelemetry/semantic-conventions';\n\nconst sdk = new NodeSDK({\n  resource: new Resource({\n    [ATTR_SERVICE_NAME]: process.env.OTEL_SERVICE_NAME || 'agent-ops-backend',\n  }),\n  traceExporter: new OTLPTraceExporter({\n    url: process.env.OTEL_EXPORTER_OTLP_ENDPOINT || 'http://localhost:4317',\n  }),\n  metricReader: new OTLPMetricExporter({\n    url: process.env.OTEL_EXPORTER_OTLP_ENDPOINT || 'http://localhost:4317',\n  }),\n  instrumentations: [getNodeAutoInstrumentations()],\n});\n\nexport function initTelemetry() {\n  sdk.start();\n  process.on('SIGTERM', () =\u003e sdk.shutdown());\n}\n```\n\n## Update src/index.ts\nImport and call `initTelemetry()` BEFORE creating Fastify instance.\n\n## Environment Variables (auto-injected by Aspire)\n- OTEL_SERVICE_NAME\n- OTEL_EXPORTER_OTLP_ENDPOINT\n\n## Acceptance Criteria\n- [ ] Telemetry initializes without errors\n- [ ] HTTP requests appear as traces in Aspire Dashboard\n- [ ] Graceful shutdown on SIGTERM","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-22T14:10:30.057378-06:00","updated_at":"2025-12-22T14:10:30.057378-06:00","labels":["aspire","backend","opentelemetry"],"dependencies":[{"issue_id":"agent-ops-93m.3","depends_on_id":"agent-ops-93m","type":"parent-child","created_at":"2025-12-22T14:10:30.060164-06:00","created_by":"daemon"},{"issue_id":"agent-ops-93m.3","depends_on_id":"agent-ops-93m.2","type":"blocks","created_at":"2025-12-22T14:10:30.061485-06:00","created_by":"daemon"}]}
{"id":"agent-ops-93m.4","title":"Refactor ObservabilityService for OpenTelemetry spans","description":"Refactor ObservabilityService to emit OpenTelemetry spans in addition to SQLite traces. Keep SQLite for domain-specific aggregation queries.\n\n## Approach: Dual Output\n1. **OpenTelemetry spans** → Aspire Dashboard visualization\n2. **SQLite traces** → Domain queries (cost summaries, tool stats)\n\n## Changes to ObservabilityService\n\n### Add tracer instance\n```typescript\nimport { trace, SpanKind, SpanStatusCode } from '@opentelemetry/api';\n\nconst tracer = trace.getTracer('agent-ops');\n```\n\n### Modify recordTrace() to emit OTEL span\n```typescript\nasync recordTrace(trace: Omit\u003cNewTrace, 'id' | 'timestamp'\u003e): Promise\u003cTrace\u003e {\n  // Emit OTEL span\n  const span = tracer.startSpan(trace.eventType, {\n    kind: SpanKind.INTERNAL,\n    attributes: {\n      'agent.worker_id': trace.workerId ?? undefined,\n      'agent.work_item_id': trace.workItemId ?? undefined,\n      ...flattenData(trace.data),\n    },\n  });\n  span.end();\n\n  // Also write to SQLite for queries\n  // ... existing SQLite insert logic ...\n}\n```\n\n### Add helper for custom spans\n```typescript\nstartAgentSpan(name: string, workerId: string): Span {\n  return tracer.startSpan(name, {\n    attributes: { 'agent.worker_id': workerId },\n  });\n}\n```\n\n## What to Keep in SQLite\n- getCostSummary() - domain-specific aggregation\n- getToolCallStats() - per-tool breakdown\n- getSystemMetrics() - worker aggregations\n- getTraceStatsByEventType() - event distribution\n\n## Acceptance Criteria\n- [ ] All trace events appear in Aspire Dashboard\n- [ ] SQLite queries still work for aggregations\n- [ ] Tool calls show as child spans of agent operations\n- [ ] Errors have proper OTEL status codes","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-22T14:10:48.758777-06:00","updated_at":"2025-12-22T14:10:48.758777-06:00","labels":["aspire","backend","opentelemetry","refactor"],"dependencies":[{"issue_id":"agent-ops-93m.4","depends_on_id":"agent-ops-93m","type":"parent-child","created_at":"2025-12-22T14:10:48.761593-06:00","created_by":"daemon"},{"issue_id":"agent-ops-93m.4","depends_on_id":"agent-ops-93m.3","type":"blocks","created_at":"2025-12-22T14:10:48.762972-06:00","created_by":"daemon"}]}
{"id":"agent-ops-93m.5","title":"Update environment configuration for Aspire","description":"Update environment configuration to use Aspire-injected values instead of hardcoded defaults.\n\n## Aspire Auto-Injected Variables\nAspire automatically injects these environment variables:\n- `OTEL_SERVICE_NAME` - Service name for telemetry\n- `OTEL_EXPORTER_OTLP_ENDPOINT` - OTLP collector endpoint\n- `services__backend__api__0` - Backend URL for frontend\n\n## Backend Changes (src/config.ts or equivalent)\n```typescript\nexport const config = {\n  port: parseInt(process.env.PORT || '3001'),\n  host: process.env.HOST || '0.0.0.0',\n  // Remove hardcoded OTEL config - use Aspire-injected values\n  // OTEL SDK reads from env automatically\n};\n```\n\n## Frontend Changes\nUpdate API client to use injected backend URL:\n```typescript\nconst API_BASE = import.meta.env.VITE_API_URL \n  || process.env.services__backend__api__0 \n  || 'http://localhost:3001';\n```\n\n## Update AppHost to pass frontend env\n```csharp\nvar frontend = builder.AddViteApp(\"frontend\", \"../frontend\")\n    .WithReference(backend)\n    .WithEnvironment(\"VITE_API_URL\", backend.GetEndpoint(\"api\"));\n```\n\n## Acceptance Criteria\n- [ ] Backend reads OTEL config from environment\n- [ ] Frontend connects to backend via Aspire service discovery\n- [ ] No hardcoded localhost URLs remain\n- [ ] Works in both Aspire-managed and standalone modes","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-22T14:11:03.511642-06:00","updated_at":"2025-12-22T14:11:03.511642-06:00","labels":["aspire","backend","config","frontend"],"dependencies":[{"issue_id":"agent-ops-93m.5","depends_on_id":"agent-ops-93m","type":"parent-child","created_at":"2025-12-22T14:11:03.51486-06:00","created_by":"daemon"},{"issue_id":"agent-ops-93m.5","depends_on_id":"agent-ops-93m.1","type":"blocks","created_at":"2025-12-22T14:11:03.516283-06:00","created_by":"daemon"}]}
{"id":"agent-ops-93m.6","title":"Remove Makefile orchestration","description":"Remove the Makefile-based orchestration now that Aspire handles service startup.\n\n## Files to Remove/Modify\n\n### Delete\n- `Makefile` (orchestration replaced by Aspire)\n\n### Keep useful npm scripts in package.json\nBackend package.json:\n```json\n{\n  \"scripts\": {\n    \"dev\": \"tsx watch src/index.ts\",\n    \"build\": \"tsc\",\n    \"start\": \"node dist/index.js\",\n    \"test\": \"vitest\",\n    \"db:push\": \"drizzle-kit push\",\n    \"db:studio\": \"drizzle-kit studio\"\n  }\n}\n```\n\nFrontend package.json:\n```json\n{\n  \"scripts\": {\n    \"dev\": \"vite\",\n    \"build\": \"vite build\",\n    \"preview\": \"vite preview\"\n  }\n}\n```\n\n## New Workflow\n```bash\n# Start everything with Aspire\ndotnet run --project AppHost\n\n# Individual service dev (if needed)\ncd backend \u0026\u0026 npm run dev\ncd frontend \u0026\u0026 npm run dev\n\n# Database operations\ncd backend \u0026\u0026 npm run db:push\n```\n\n## Acceptance Criteria\n- [ ] Makefile deleted\n- [ ] npm scripts work independently\n- [ ] README updated with new workflow\n- [ ] No orphaned PID files in /tmp","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-22T14:11:17.235982-06:00","updated_at":"2025-12-22T14:11:17.235982-06:00","labels":["cleanup","infrastructure"],"dependencies":[{"issue_id":"agent-ops-93m.6","depends_on_id":"agent-ops-93m","type":"parent-child","created_at":"2025-12-22T14:11:17.239551-06:00","created_by":"daemon"},{"issue_id":"agent-ops-93m.6","depends_on_id":"agent-ops-93m.1","type":"blocks","created_at":"2025-12-22T14:11:17.240836-06:00","created_by":"daemon"},{"issue_id":"agent-ops-93m.6","depends_on_id":"agent-ops-93m.5","type":"blocks","created_at":"2025-12-22T14:11:17.241388-06:00","created_by":"daemon"}]}
{"id":"agent-ops-93m.7","title":"Test Aspire integration end-to-end","description":"Verify the complete Aspire integration works end-to-end.\n\n## Test Scenarios\n\n### 1. Service Startup\n```bash\ndotnet run --project AppHost\n```\n- [ ] Backend starts on port 3001\n- [ ] Frontend starts on Vite dev server\n- [ ] Aspire Dashboard accessible at http://localhost:15888\n\n### 2. Aspire Dashboard Verification\n- [ ] Both services appear in Resources view\n- [ ] Service endpoints listed correctly\n- [ ] Environment variables visible\n\n### 3. Telemetry Flow\n- [ ] Make HTTP request to backend\n- [ ] Verify trace appears in Dashboard Traces view\n- [ ] Check span attributes include service name\n\n### 4. Custom Spans (Agent Operations)\n- [ ] Trigger agent state change\n- [ ] Verify custom span in Dashboard\n- [ ] Check worker_id attribute present\n\n### 5. Error Handling\n- [ ] Trigger an error condition\n- [ ] Verify error span has ERROR status\n- [ ] Check error details in span attributes\n\n### 6. Metrics\n- [ ] Verify runtime metrics in Dashboard\n- [ ] Check HTTP request metrics\n\n### 7. Graceful Shutdown\n- [ ] Stop Aspire (Ctrl+C)\n- [ ] Verify clean shutdown (no orphan processes)\n- [ ] Check final telemetry flushed\n\n## Acceptance Criteria\n- [ ] All test scenarios pass\n- [ ] No console errors during operation\n- [ ] Telemetry latency acceptable (\u003c100ms)\n- [ ] Memory usage stable over time","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-22T14:11:32.24349-06:00","updated_at":"2025-12-22T14:11:32.24349-06:00","labels":["aspire","integration","testing"],"dependencies":[{"issue_id":"agent-ops-93m.7","depends_on_id":"agent-ops-93m","type":"parent-child","created_at":"2025-12-22T14:11:32.247476-06:00","created_by":"daemon"},{"issue_id":"agent-ops-93m.7","depends_on_id":"agent-ops-93m.4","type":"blocks","created_at":"2025-12-22T14:11:32.248899-06:00","created_by":"daemon"},{"issue_id":"agent-ops-93m.7","depends_on_id":"agent-ops-93m.5","type":"blocks","created_at":"2025-12-22T14:11:32.249591-06:00","created_by":"daemon"}]}
{"id":"agent-ops-avw","title":"Phase 4: Agent Integration","description":"Integrate Claude Agent SDK with agent manager service, trace/pause hooks, and built-in YAML templates for refiner, implementer, tester, and reviewer agents.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-20T22:44:00.166505-06:00","updated_at":"2025-12-20T22:44:00.166505-06:00","labels":["backend","claude-sdk"],"dependencies":[{"issue_id":"agent-ops-avw","depends_on_id":"agent-ops-7vk","type":"blocks","created_at":"2025-12-20T22:47:28.564613-06:00","created_by":"daemon"}]}
{"id":"agent-ops-avw.1","title":"Implement Agent manager service","description":"Create src/services/agent-manager.service.ts to spawn, manage, and terminate Claude Agent SDK instances with proper configuration from templates.","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T22:46:03.948583-06:00","updated_at":"2025-12-20T22:46:03.948583-06:00","labels":["backend","claude-sdk","services"],"dependencies":[{"issue_id":"agent-ops-avw.1","depends_on_id":"agent-ops-avw","type":"parent-child","created_at":"2025-12-20T22:46:03.951174-06:00","created_by":"daemon"}]}
{"id":"agent-ops-avw.2","title":"Implement trace hook","description":"Create src/hooks/trace.hook.ts for Claude Agent SDK to capture tool calls, token usage, and state changes for observability.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-20T22:46:05.345262-06:00","updated_at":"2025-12-20T22:46:05.345262-06:00","labels":["backend","claude-sdk","hooks"],"dependencies":[{"issue_id":"agent-ops-avw.2","depends_on_id":"agent-ops-avw","type":"parent-child","created_at":"2025-12-20T22:46:05.348616-06:00","created_by":"daemon"}]}
{"id":"agent-ops-avw.3","title":"Implement pause hook","description":"Create src/hooks/pause.hook.ts for Claude Agent SDK to support pausing/resuming agent execution on demand.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-20T22:46:06.498876-06:00","updated_at":"2025-12-20T22:46:06.498876-06:00","labels":["backend","claude-sdk","hooks"],"dependencies":[{"issue_id":"agent-ops-avw.3","depends_on_id":"agent-ops-avw","type":"parent-child","created_at":"2025-12-20T22:46:06.501947-06:00","created_by":"daemon"}]}
{"id":"agent-ops-avw.4","title":"Create Refiner template YAML","description":"Create src/templates/refiner.yaml with system prompt, permission mode, and tools for spec refinement agent.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-20T22:46:07.817133-06:00","updated_at":"2025-12-20T22:46:07.817133-06:00","labels":["backend","templates"],"dependencies":[{"issue_id":"agent-ops-avw.4","depends_on_id":"agent-ops-avw","type":"parent-child","created_at":"2025-12-20T22:46:07.819773-06:00","created_by":"daemon"}]}
{"id":"agent-ops-avw.5","title":"Create Implementer template YAML","description":"Create src/templates/implementer.yaml with system prompt, permission mode (acceptEdits), and tools for code implementation agent.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-20T22:46:09.024097-06:00","updated_at":"2025-12-20T22:46:09.024097-06:00","labels":["backend","templates"],"dependencies":[{"issue_id":"agent-ops-avw.5","depends_on_id":"agent-ops-avw","type":"parent-child","created_at":"2025-12-20T22:46:09.027293-06:00","created_by":"daemon"}]}
{"id":"agent-ops-avw.6","title":"Create Tester template YAML","description":"Create src/templates/tester.yaml with system prompt, permission mode, and tools for QA testing agent.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-20T22:46:11.462785-06:00","updated_at":"2025-12-20T22:46:11.462785-06:00","labels":["backend","templates"],"dependencies":[{"issue_id":"agent-ops-avw.6","depends_on_id":"agent-ops-avw","type":"parent-child","created_at":"2025-12-20T22:46:11.465369-06:00","created_by":"daemon"}]}
{"id":"agent-ops-avw.7","title":"Create Reviewer template YAML","description":"Create src/templates/reviewer.yaml with system prompt, permission mode (askUser), and tools for code review agent.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-20T22:46:12.707073-06:00","updated_at":"2025-12-20T22:46:12.707073-06:00","labels":["backend","templates"],"dependencies":[{"issue_id":"agent-ops-avw.7","depends_on_id":"agent-ops-avw","type":"parent-child","created_at":"2025-12-20T22:46:12.709704-06:00","created_by":"daemon"}]}
{"id":"agent-ops-ll0","title":"Phase 3: API Routes","description":"Implement REST API endpoints and WebSocket hub for work items, templates, workers, metrics, and real-time events.","status":"open","priority":0,"issue_type":"epic","created_at":"2025-12-20T22:43:58.886066-06:00","updated_at":"2025-12-20T22:43:58.886066-06:00","labels":["api","backend"],"dependencies":[{"issue_id":"agent-ops-ll0","depends_on_id":"agent-ops-7vk","type":"blocks","created_at":"2025-12-20T22:47:28.345579-06:00","created_by":"daemon"}]}
{"id":"agent-ops-ll0.1","title":"Implement Work Items routes","description":"Create src/routes/work-items.routes.ts with REST endpoints: POST/GET/PATCH/DELETE /api/work-items, POST transition, POST assign.","status":"open","priority":0,"issue_type":"task","created_at":"2025-12-20T22:45:32.595638-06:00","updated_at":"2025-12-20T22:45:32.595638-06:00","labels":["api","backend"],"dependencies":[{"issue_id":"agent-ops-ll0.1","depends_on_id":"agent-ops-ll0","type":"parent-child","created_at":"2025-12-20T22:45:32.596204-06:00","created_by":"daemon"}]}
{"id":"agent-ops-ll0.2","title":"Implement Templates routes","description":"Create src/routes/templates.routes.ts with REST endpoints: GET/POST/PATCH/DELETE /api/templates.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-20T22:45:33.52594-06:00","updated_at":"2025-12-20T22:45:33.52594-06:00","labels":["api","backend"],"dependencies":[{"issue_id":"agent-ops-ll0.2","depends_on_id":"agent-ops-ll0","type":"parent-child","created_at":"2025-12-20T22:45:33.530596-06:00","created_by":"daemon"}]}
{"id":"agent-ops-ll0.3","title":"Implement Workers routes","description":"Create src/routes/workers.routes.ts with REST endpoints: GET /api/workers, POST pause/resume/terminate/inject.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-20T22:45:35.547777-06:00","updated_at":"2025-12-20T22:45:35.547777-06:00","labels":["api","backend"],"dependencies":[{"issue_id":"agent-ops-ll0.3","depends_on_id":"agent-ops-ll0","type":"parent-child","created_at":"2025-12-20T22:45:35.550471-06:00","created_by":"daemon"}]}
{"id":"agent-ops-ll0.4","title":"Implement Metrics routes","description":"Create src/routes/metrics.routes.ts with endpoints: GET /api/metrics/agents, /api/metrics/work, /api/metrics/system, /api/traces.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-20T22:45:36.621931-06:00","updated_at":"2025-12-20T22:45:36.621931-06:00","labels":["api","backend"],"dependencies":[{"issue_id":"agent-ops-ll0.4","depends_on_id":"agent-ops-ll0","type":"parent-child","created_at":"2025-12-20T22:45:36.625312-06:00","created_by":"daemon"}]}
{"id":"agent-ops-ll0.5","title":"Implement Config routes","description":"Create src/routes/config.routes.ts with endpoints: GET/PATCH /api/config/workflow, GET/PATCH /api/config/pool.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-20T22:45:37.906312-06:00","updated_at":"2025-12-20T22:45:37.906312-06:00","labels":["api","backend"],"dependencies":[{"issue_id":"agent-ops-ll0.5","depends_on_id":"agent-ops-ll0","type":"parent-child","created_at":"2025-12-20T22:45:37.908739-06:00","created_by":"daemon"}]}
{"id":"agent-ops-ll0.6","title":"Implement WebSocket routes","description":"Create src/routes/ws.routes.ts for WebSocket connections handling ServerEvents and ClientCommands as specified in design doc.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-20T22:45:39.305161-06:00","updated_at":"2025-12-20T22:45:39.305161-06:00","labels":["api","backend","websocket"],"dependencies":[{"issue_id":"agent-ops-ll0.6","depends_on_id":"agent-ops-ll0","type":"parent-child","created_at":"2025-12-20T22:45:39.308028-06:00","created_by":"daemon"}]}
{"id":"agent-ops-tlv","title":"Phase 6: Polish","description":"Add unit and integration tests, Docker configuration, and documentation for production readiness.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-20T22:44:02.485346-06:00","updated_at":"2025-12-20T22:44:02.485346-06:00","labels":["devops","testing"],"dependencies":[{"issue_id":"agent-ops-tlv","depends_on_id":"agent-ops-4yu","type":"blocks","created_at":"2025-12-20T22:47:29.003719-06:00","created_by":"daemon"}]}
{"id":"agent-ops-tlv.1","title":"Add backend unit tests","description":"Create unit tests for all services, repositories, and utility functions using Vitest.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-20T22:47:13.236481-06:00","updated_at":"2025-12-20T22:47:13.236481-06:00","labels":["backend","testing"],"dependencies":[{"issue_id":"agent-ops-tlv.1","depends_on_id":"agent-ops-tlv","type":"parent-child","created_at":"2025-12-20T22:47:13.239878-06:00","created_by":"daemon"}]}
{"id":"agent-ops-tlv.2","title":"Add backend integration tests","description":"Create integration tests for API endpoints using Fastify inject and test database.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-20T22:47:14.652367-06:00","updated_at":"2025-12-20T22:47:14.652367-06:00","labels":["backend","testing"],"dependencies":[{"issue_id":"agent-ops-tlv.2","depends_on_id":"agent-ops-tlv","type":"parent-child","created_at":"2025-12-20T22:47:14.655291-06:00","created_by":"daemon"}]}
{"id":"agent-ops-tlv.3","title":"Add frontend component tests","description":"Create component tests for key UI components using Vitest and React Testing Library.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-20T22:47:15.710388-06:00","updated_at":"2025-12-20T22:47:15.710388-06:00","labels":["frontend","testing"],"dependencies":[{"issue_id":"agent-ops-tlv.3","depends_on_id":"agent-ops-tlv","type":"parent-child","created_at":"2025-12-20T22:47:15.712877-06:00","created_by":"daemon"}]}
{"id":"agent-ops-tlv.4","title":"Create Docker configuration","description":"Create Dockerfile for backend and frontend, docker-compose.yml for local development with all services.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-20T22:47:16.99926-06:00","updated_at":"2025-12-20T22:47:16.99926-06:00","labels":["devops","docker"],"dependencies":[{"issue_id":"agent-ops-tlv.4","depends_on_id":"agent-ops-tlv","type":"parent-child","created_at":"2025-12-20T22:47:17.003535-06:00","created_by":"daemon"}]}
{"id":"agent-ops-tlv.5","title":"Add environment configuration","description":"Create .env.example files, document all environment variables, add validation on startup.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-20T22:47:18.153572-06:00","updated_at":"2025-12-20T22:47:18.153572-06:00","labels":["config","devops"],"dependencies":[{"issue_id":"agent-ops-tlv.5","depends_on_id":"agent-ops-tlv","type":"parent-child","created_at":"2025-12-20T22:47:18.156802-06:00","created_by":"daemon"}]}
{"id":"agent-ops-tlv.6","title":"Write README documentation","description":"Document setup instructions, architecture overview, API reference, and development workflow in README.md.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-20T22:47:19.462706-06:00","updated_at":"2025-12-20T22:47:19.462706-06:00","labels":["docs"],"dependencies":[{"issue_id":"agent-ops-tlv.6","depends_on_id":"agent-ops-tlv","type":"parent-child","created_at":"2025-12-20T22:47:19.465957-06:00","created_by":"daemon"}]}
